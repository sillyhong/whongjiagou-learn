## ç»„ä»¶çš„å£°æ˜

-   å…¨å±€ç»„ä»¶
    
    ```
    <my-button></my-button>  
    Vue.component('my-button',{
      template:'<button>ç‚¹æˆ‘å•Š</button>'
    })
    let vm = new Vue({
      el:'#app'
    })
    
    ```
    
-   å±€éƒ¨ç»„ä»¶
    
    ```
    <my-button></my-button>
    let vm = new Vue({
      el:'#app',
      components:{
          'MyButton':{
              template:'<button>æŒ‰é’®</button>'
          }
      }
    });
    
    ```
    
    HTMLä¸æ”¯æŒè‡ªé—­åˆçš„è‡ªå®šä¹‰å…ƒç´ ï¼Œåœ¨DOMæ¨¡æ¿é‡Œæ°¸è¿œä¸è¦ä½¿ç”¨è‡ªé—­å’Œç»„ä»¶,åœ¨HTMLä¸­ä¹Ÿä¸æ”¯æŒMyButtonçš„å†™æ³•ï¼Œæ‰€ä»¥ç»„ä»¶è°ƒç”¨å…¨éƒ¨ä½¿ç”¨çŸ­æ¨ªçº¿è¿æ¥çš„æ–¹å¼ï¼
    

[https://www.w3.org/TR/html/syntax.html#void-elements](https://www.w3.org/TR/html/syntax.html#void-elements)

## ç»„ä»¶çš„æ•°æ®

åœ¨ç»„ä»¶ä¸­çš„æ•°æ®å¿…é¡»æ˜¯å‡½æ•°çš„å½¢å¼

```
'MyButton':{
    data(){
        return {content:'æŒ‰é’®'}
    },
    template:'<button>{{content}}</button>'
}

```

## ç»„ä»¶çš„å±æ€§åº”ç”¨åŠæ ¡éªŒ

### å±æ€§åº”ç”¨

```
<my-button button-content="æŒ‰é’®"></my-button>
components:{
    'MyButton':{
        props:['buttonContent'],
        template:'<button>{{buttonContent}}</button>'
    }
}

```

å±æ€§åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šéœ€è¦ä½¿ç”¨çŸ­æ¨ªçº¿å‘½åæ³•ï¼Œåœ¨ç»„ä»¶ä¸­å£°æ˜éœ€è¦é‡‡ç”¨é©¼å³°å‘½åæ³•

### å±æ€§æ ¡éªŒ

```
<my-button button-content="æŒ‰é’®" :number="'1'"></my-button>
components:{
    'MyButton':{
        props:{
            buttonContent:String,
            arr:{
                type:Array,
                default:()=>([])
            },
            number:{
                type:Number,
                validator:(value)=>{
                    return typeof value == 'number'
                }
            },

        },
        template:'<button>{{buttonContent}} {{arr}} {{number}}</button>'
    }
}

```

### æ‰¹é‡ä¼ å…¥æ•°æ®

```
<my-button v-bind="info"></my-button>
let vm = new Vue({
    el:'#app',
    data:{
        info:{name:'å§œæ–‡',age:18}
    },
    components:{
        'MyButton':{
            props:['name','age'],
            inheritAttrs:false,
            mounted(){
                console.log(this.$attrs)
            },
            template:'<button>{{name}} {{age}} </button>'
        }
    }
});

```

## äº‹ä»¶åº”ç”¨

```
<!-- ç»™ç»„ä»¶ç»‘å®šæ–¹æ³•ï¼Œåœ¨å†…éƒ¨è§¦å‘ç»‘å®šçš„æ–¹æ³• -->
<my-button @click="change" msg="æŒ‰é’®"></my-button>
let vm = new Vue({
    el:'#app',
    methods:{
        change(){ alert('hello'); }
    },
    components:{
        'MyButton':{
            props:['msg'],
            template:`<div>
                <button @click="this.$listeners.click">{{msg}}</button>
                <button v-on="this.$listeners">{{msg}}</button>
                <button @click="$emit('click')"></button>
            </div>`
        }
    }
});

```

åœ¨ç»„ä»¶çš„æ ¹å…ƒç´ ä¸Šç›´æ¥ç›‘å¬ä¸€ä¸ªåŸç”Ÿäº‹ä»¶

```
<my-button @click.native="change"></my-button>

```

## \\$parent & \\$child

å®ç°æ”¶ç¼©é¢æ¿åŠŸèƒ½

```
<collapse>
    <collapse-item title="react">å†…å®¹1</collapse-item>
    <collapse-item title="vue">å†…å®¹2</collapse-item>
    <collapse-item title="node">å†…å®¹3</collapse-item>
</collapse>  
Vue.component('Collapse',{
    methods:{
        open(id){
            this.$children.forEach(child => {
                if(child._uid != id){
                    child.show = false;
                }
            });
        }
    },
    template:`<div class="wrap">
        <slot></slot>
    </div>`
});
Vue.component('CollapseItem',{
    props:['title'],
    data(){
        return {show:true}
    },
    methods:{
        change(){
            this.$parent.open(this._uid);
            this.show =!this.show;
        }
    },  
    template:`<div class="collapse-item" @click="change">
        <div class="title">{{title}}</div>
        <div v-show="show">
            <slot></slot>    
        </div>
    </div>`
});

```

## v-slotåº”ç”¨

-   v-slot:å¯ä»¥ç®€å†™æˆ#
    
    ```
    <List>
      <template v-slot:banana>ğŸŒ</template>
      <template v-slot:apple>ğŸ</template>
          ğŸŠ
    </List>  
    list:{
      template:`
          <ul>
              <li><slot></slot></li>
              <li><slot name="banner"></slot></li>    
              <li><slot name="apple"></slot></li>   
          </ul>
      `
    }
    
    ```
    
-   ä½œç”¨åŸŸæ’æ§½
    
    ```
    <List #default="{val}">
      {{val}}
    </List> 
    list:{
      data(){
          return {arr:[1,2,3]}
      },
      template:`
          <ul>
              <li v-for="a in arr" :key="a">
                  <slot :val="a">{{a}}</slot>
              </li>
          </ul>
      `
    }
    
    ```
    

## Provide & inject

è·¨ç»„ä»¶æ•°æ®ä¼ é€’ï¼Œä¸»è¦ä¸ºé«˜é˜¶æ’ä»¶/ç»„ä»¶åº“æä¾›ç”¨ä¾‹

```
provide:{ name:'zf' },
components:{
    list:{
        inject:['name'],
        template:`<div>{{name}}</div>`
    }
}

```

## çˆ¶å­ç»„ä»¶æ•°æ®åŒæ­¥

.sync å’Œ v-modelçš„ä½¿ç”¨

```
<div id="app">
        {{msg}}
        <tab :msg="msg" @update:msg="change"></tab>
        <tab :msg.sync="msg"></tab>
        <tab v-model="msg"></tab>
</div>


let vm = new Vue({
    el:'#app',
    data:{
        msg:'hello'
    },
    methods:{
        change(value){
            this.msg = value
        }
    },
    components:{
        tab:{
            props:['msg'],
            methods:{
                change(){
                    this.$emit('update:msg','world')
                    this.$emit('input','world');
                }
            },
            template:`<div>
                {{msg}} <button @click="change">åˆ‡æ¢</button>
            </div>`
        }
    }
})

```

## ref ç‰¹æ€§

-   æ”¾åœ¨domä¸Šè¡¨ç¤ºè·å–å½“å‰domå…ƒç´ ,æ”¾åˆ°ç»„ä»¶ä¸Šè¡¨ç¤ºè·å–å½“å‰ç»„ä»¶å®ä¾‹,åœ¨v-forä¸­è·å–çš„æ˜¯é›†åˆ

```
// åœ¨ç»„ä»¶ä¸­å¯ä»¥è·å–ç»„ä»¶å®ä¾‹
<tab :msg="msg" @update:msg="change" ref="ele"></tab>
this.$refs.ele.change()

// æ”¾åœ¨domä¸Šè¡¨ç¤ºè·å–å½“å‰domå…ƒç´ 
<div ref="ele"></div>
this.$refs.ele.style.border="1px solid red"

// åœ¨v-forä¸­è·å–çš„æ˜¯é›†åˆ
<template v-for="a in 3">
    <tab :msg="msg" @update:msg="change" ref="ele" :key="a"></tab>
</template>
console.log(this.$refs.ele.length)

```

### ç»„ä»¶é—´é€šä¿¡

-   1) propså’Œ$emit çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®æ˜¯é€šè¿‡propä¼ é€’çš„ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶æ˜¯é€šè¿‡$emitè§¦å‘äº‹ä»¶æ¥åšåˆ°çš„
-   2) $attrså’Œ$listeners A->B->Cã€‚Vue 2.4 å¼€å§‹æä¾›äº†$attrså’Œ$listenersæ¥è§£å†³è¿™ä¸ªé—®é¢˜
-   3) $parent,$children æ™ºèƒ½ç»„ä»¶æœ¨å¶ç»„ä»¶
-   4) $refs è·å–å®ä¾‹
-   5) çˆ¶ç»„ä»¶ä¸­é€šè¿‡provideræ¥æä¾›å˜é‡ï¼Œç„¶ååœ¨å­ç»„ä»¶ä¸­é€šè¿‡injectæ¥æ³¨å…¥å˜é‡ã€‚
-   6) envetBus å¹³çº§ç»„ä»¶æ•°æ®ä¼ é€’ è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ä¸­å¤®äº‹ä»¶æ€»çº¿çš„æ–¹å¼
-   7) vuexçŠ¶æ€ç®¡ç†

## å¼‚æ­¥ç»„ä»¶

```
Vue.component('async', function (resolve, reject) {
    setTimeout(function () {
        resolve({
            template: '<div>å¼‚æ­¥ç»„ä»¶</div>'
        })
    }, 1000);
});

```

åœ¨åæœŸæˆ‘ä»¬ä¸€èˆ¬é…åˆwebpackçš„importè¯­æ³•ä½¿ç”¨

## é€’å½’ç»„ä»¶

-   nameå±æ€§ (åæœŸå®ç°èœå•ç»„ä»¶)

Powered by [idoc](https://github.com/jaywcjlove/idoc). Dependence [Node.js](https://nodejs.org) run.